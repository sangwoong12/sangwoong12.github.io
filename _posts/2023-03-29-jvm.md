---
title: JVM
date: 2023-03-21 09:00:00 +0800
categories: [java]
tags: [java]
---

# 자바 가상 머신(JVM)의 동작 방식
1. 자바로 개발된 프로그램을 실행하면 JVM 은 OS로 부터 메모리를 할당한다.
2. 자바 컴파일러(javac)기 지바 소스코드를 자바 바이트코드(.class)로 컴파일 한다.
3. Class Loader를 통해 JVM Runtime Data Area로 로딩한다.
4. Runtime Data Area 에 로딩 된 .class 들은 Execution Engine 을 통해 해석한다.
5. 해석된 바이트 코드는 Runtime Data Area의 각 영역에 배치되어 수행하며 이 과정에서 Exectuion Engine에 의해 GC의 작동과 스레드 동기화가 이루어진다.

# 클래스 로더 (Class Loader)
- 프로그램이 실행 중인 런타임에서야 모든 코드가 자바 가상 머신과 연결되는데 이렇게 동적으로 클래스 로딩해주는 역할을 하는 것이 클래스 로더이다.

## 클래스 로더의 종류
- 부트스트랩 클래스 로더(Bootstrap Class Loader):
  - JVM 시작 시 가장 최초로 실행되는 클래스 로더
  - 자바 클래스를 로드할 수 있는 자바 자체의 클래스 로더와 최소한의 자바 클래스만 로드
- 확장 클래스 로더(Extension Class Loader):
  - 부트스트랩 클래스 로더를 부모로 갖는 클래스 로더, 확장 자바 클래스들을 로드
  - jre/lib/ext에 있는 클래스 파일을 로드
- 시스템 클래스 로더(System Class Loader):
  - 자바 프로그램 실행 시 지정한 Classpath 에 있는 클래스 파일 혹은 jar에 속한 클래스들을 로드

## 클래스 로더 3가지 원칙
- 위임 원칙 : 클래스 로더는 클래스 또는 리소스를 찾기 위해 요청을 받았을 때, 상위 클래스 로더에게 책임을 위임하는 위임 모델을 따른다.
- 가시 범위 원칙 : 하위 클래스 로더는 상위 클래스 로더가 로드한 클래스를 볼 수 있지만, 반대로 상위 클래스 로더는 하위 클래스 로더가 로드한 클래스를 알수없다.
- 유일성의 원칙 : 하위 클래스 로더가 상위 클래스 로더에게 로드한 클래스를 다시 로드하지 않아야 한다.

## 동적 로딩

- 로드타임 동적 로딩 (Load-time Dynamic Loading)
  - JVM 이 시작되고 부트스트랩 클래스 로더가 생성된 후에 모든 클래스가 상속받고 있는 Object 클래스를 읽어온다.
- 런타임 동적 로딩 (Runtime Dynamic Loading)
  -
